# ARC-004 — Pre‑Sync Schema Validation (v0)

- Order ID: ARC-004
- Workspace: archivist_ai_0
- Status: Open
- Owner: Operator (this repo)

## Intent
Add a lightweight, local validator for staged orders/acks/reports to catch missing required fields before syncing to the shared hub.

## Deliverables
1) `tools/validate_staged_json.ps1` — validates JSON files in `outbox/` and writes `logs/validate_staged.json`
2) README update showing when/how to run validation
3) Optional smoke check script under `tests/` running the validator

## Checks (v0 field presence)
- Orders: `id`, `workspace`, `title`, `status`, `created_at`, `attachments`
- Acks: `order_id`, `ack_id`, `workspace`, `ack_timestamp`, `notes`
- Reports: `order_id`, `report_id`, `workspace`, `summary`, `created_at`, `artifacts`

## Steps
1) Run: `./tools/validate_staged_json.ps1` (writes `logs/validate_staged.json`)
2) If `ok: false`, fix staged files in `outbox/` and re‑run
3) When clean, `./tools/sync_outbox_to_hub.ps1`

## Success Criteria
- Validator produces `ok: true` with zero missing field errors
- README shows the validation step in the Exchange flow

## Notes
- Keep changes minimal and reversible
- No secrets in repo; logs remain ignored by git
